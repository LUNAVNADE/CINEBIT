<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CINEBIT</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
<nav class="navbar">
  <div class="logo">
    <img src="images/logo/cinebit.png" alt="cinebit" />
    <div class="floating-location" onclick="toggleLocationDropdown()">
      <img id="locationIcon" class="flag-icon" src="images/flags/default.png" alt="flag" />
      <span id="selectedLocation">Location</span>
    </div>
  </div>
  <div class="location-dropdown" id="locationDropdown">
    <input type="text" id="locationSearch" placeholder="Search city..." onkeyup="filterCities()" />
    <ul id="cityList"></ul>
  </div>
  <div class="nav-buttons">
    <a href="#" onclick="openModal('loginModal')">Login</a>
    <button class="btn-create" onclick="openModal('registerModal')">Make an Account</button>
    <label class="theme-switch">
      <input type="checkbox" id="themeToggle" />
      <span class="slider"></span>
    </label>
  </div>
</nav>  

  <header class="hero">
    <h1>Good Afternoon, USER</h1>
    <input type="text" placeholder="Search movies or cinemas..." class="search-bar" />
    <div class="quick-links">
      <a href="movies.html" class="link">
        <i class="fas fa-film" style="color: #00796b; font-size: 32px;"></i>
        Movies
      </a>
      <a href="foods.html" class="link">
        <i class="fas fa-utensils" style="color: #00796b; font-size: 32px;"></i>
        Food
      </a>
    </div>
</div>
    </div> 
  <section class="now-playing">
    <h2>Now Playing</h2>
    <div class="movies">
      <div class="movie">
        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/1/1f/Mission_Impossible_%E2%80%93_The_Final_Reckoning_Poster.jpg/250px-Mission_Impossible_%E2%80%93_The_Final_Reckoning_Poster.jpg" alt="mission impossible">
        <p>Mission: Impossible - The Final Reckoning (2025)</p>
      </div>
      <div class="movie">
        <img src="https://upload.wikimedia.org/wikipedia/en/5/56/Lilo_%26_Stitch_2025_Theatrical_Poster.jpg" alt="lilo and stitch">
        <p>Lilo & Stitch (2025)</p>
      </div>
      <div class="movie">
        <img src="https://upload.wikimedia.org/wikipedia/id/8/88/Karate_Kid_Legends_Poster.jpg" alt="karate kids">
        <p>Karate Kids: Legends (2025)</p>
      </div>
      <div class="movie">
        <img src="https://upload.wikimedia.org/wikipedia/en/8/80/How_To_Train_Your_Dragon_2025_Poster.jpg" alt="how to train your dragon">
        <p>How to Train Your Dragon (2025)</p>
      </div>
    </div>
  </section>

  <!-- buat login -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('loginModal')">&times;</span>
      <h2>Login</h2>
      <form id="loginForm">
        <input type="email" id="loginEmail" placeholder="Email" />
        <small class="error" id="loginEmailError"></small>

        <input type="password" id="loginPassword" placeholder="Password" />
        <small class="error" id="loginPasswordError"></small>

        <button type="submit">Login</button>
      </form>
    </div>
  </div>

  <!-- buat bikin akun -->
  <div id="registerModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('registerModal')">&times;</span>
      <h2>Create Account</h2>
      <form id="registerForm">
        <input type="text" id="regName" placeholder="Name" />
        <small class="error" id="regNameError"></small>

        <input type="email" id="regEmail" placeholder="Email" />
        <small class="error" id="regEmailError"></small>

        <input type="password" id="regPassword" placeholder="Password" />
        <small class="error" id="regPasswordError"></small>

        <button type="submit">Create Account</button>
      </form>
    </div>
  </div>

  <script>
    
    function openModal(id) {
      document.getElementById(id).style.display = 'flex';
    }

    function closeModal(id) {
      document.getElementById(id).style.display = 'none';
    }

    window.onclick = function(event) {
      const login = document.getElementById('loginModal');
      const register = document.getElementById('registerModal');
      if (event.target == login) login.style.display = 'none';
      if (event.target == register) register.style.display = 'none';
    }

    //validasi form buat login
    document.getElementById("loginForm").addEventListener("submit", function (e) {
      let valid = true;

      const email = document.getElementById("loginEmail");
      const password = document.getElementById("loginPassword");
      const emailError = document.getElementById("loginEmailError");
      const passwordError = document.getElementById("loginPasswordError");

      emailError.textContent = "";
      passwordError.textContent = "";

      if (!email.value) {
        emailError.textContent = "Email is required";
        valid = false;
      } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value)) {
        emailError.textContent = "Invalid email format";
        valid = false;
      }

      if (!password.value) {
        passwordError.textContent = "Password is required";
        valid = false;
      } else if (password.value.length < 4) {
        passwordError.textContent = "Password must be at least 4 characters";
        valid = false;
      }

      if (!valid) e.preventDefault();
    });

    //validasi
    document.getElementById("registerForm").addEventListener("submit", function (e) {
      let valid = true;

      const name = document.getElementById("regName");
      const email = document.getElementById("regEmail");
      const password = document.getElementById("regPassword");

      const nameError = document.getElementById("regNameError");
      const emailError = document.getElementById("regEmailError");
      const passwordError = document.getElementById("regPasswordError");

      nameError.textContent = "";
      emailError.textContent = "";
      passwordError.textContent = "";

      if (!name.value) {
        nameError.textContent = "Name is required";
        valid = false;
      }

      if (!email.value) {
        emailError.textContent = "Email is required";
        valid = false;
      } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value)) {
        emailError.textContent = "Invalid email format.";
        valid = false;
      }

      if (!password.value) {
        passwordError.textContent = "Password is required";
        valid = false;
      } else if (password.value.length < 6) {
        passwordError.textContent = "Password must be at least 6 characters";
        valid = false;
      }

      if (!valid) e.preventDefault();
    });

    const southeastAsianCity = [
    "Jakarta", "Kuala Lumpur", "Singapore", "Bangkok", "Manila", 
    "Hanoi"
  ];

  const dropdown = document.getElementById("locationDropdown");
  const cityList = document.getElementById("cityList");
  const selectedLocation = document.getElementById("selectedLocation");

  function toggleLocationDropdown() {
    dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
    populateCityList(southeastAsianCity);
  }

  function populateCityList(city) {
    cityList.innerHTML = "";
    city.forEach(city => {
      const li = document.createElement("li");
      li.textContent = city;
      li.onclick = function () {
        selectedLocation.textContent = city;
        dropdown.style.display = "none";
        updateGreeting(city);
        updateFlagIcon(city);
        localStorage.setItem("selectedCity", city);
      };
      cityList.appendChild(li);
    });

  function filterCities() {
    const query = document.getElementById("locationSearch").value.toLowerCase();
    const filtered = southeastAsianCity.filter(city =>
      city.toLowerCase().includes(query)
    );
    populateCityList(filtered);
  }

  window.addEventListener("click", function (e) {
    if (!e.target.closest(".floating-location") && !e.target.closest(".location-dropdown")) {
      dropdown.style.display = "none";
    }
  });
    function updateGreeting(city) {
      const hour = new Date().getHours();
      let baseGreeting = "Good Afternoon";

      if (hour >= 5 && hour < 12) {
        baseGreeting = "Good Morning";
      } else if (hour >= 12 && hour < 17) {
        baseGreeting = "Good Afternoon";
      } else if (hour >= 17 && hour < 21) {
        baseGreeting = "Good Evening";
      } else {
        baseGreeting = "Good Night";
      }

      const greetingMap = {
        "Jakarta": {
          "Good Morning": "Selamat Pagi",
          "Good Afternoon": "Selamat Sore",
          "Good Evening": "Selamat Malam",
        },
        "Kuala Lumpur": {
          "Good Morning": "Selamat Pagi",
          "Good Afternoon": "Selamat Petang",
          "Good Evening": "Selamat Malam",
        },
        "Singapore": {},
        "Bangkok": {
          "Good Afternoon": "สวัสดีตอนบ่าย",
          "Good Evening": "สวัสดีตอนเย็น",
          "Good Morning": "สวัสดีตอนเช้า",
        },
        "Manila": {
          "Good Morning": "Magandang Umaga",
          "Good Afternoon": "Magandang Hapon",
          "Good Evening": "Magandang Gabi",
          "Good Night": "Magandang Gabi"
        },
        "Hanoi": {
          "Good Morning": "Chào buổi sáng",
          "Good Afternoon": "Chào buổi chiều",
          "Good Evening": "Chào buổi tối",
        }
      };

  const translations = greetingMap[city] || {};
  const localizedGreeting = translations[baseGreeting] || baseGreeting;

  document.querySelector("header.hero h1").textContent = `${localizedGreeting}, USER`;
}

    const greetingText = greetingMap[city] || "Good Afternoon";
    document.querySelector("header.hero h1").textContent = `${greetingText}, USER`;
  }
  function updateFlagIcon(city) {
  const iconMap = {
    "Jakarta": "id.jpg",
    "Kuala Lumpur": "my.jpg",
    "Singapore": "sg.jpg",
    "Bangkok": "th.jpg",
    "Manila": "ph.jpg",
    "Hanoi": "vn.jpg"
    };
  const flagFile = iconMap[city] || "default.jpg"
  document.getElementById("locationIcon").src = `images/flags/${flagFile}`;
  }

  const savedCity = null;
  if (savedCity) {
    selectedLocation.textContent = savedCity;
    updateGreeting(savedCity);
    updateFlagIcon(savedCity);
  } else {
    selectedLocation.textContent = "Select your location";
    document.getElementById("locationIcon").src = "images/flags/default.jpg";
  }

  const toggleSwitch = document.getElementById("themeToggle");
  toggleSwitch.addEventListener("change", function () {
    if (this.checked) {
      document.body.classList.add("dark-mode");
      localStorage.setItem("theme", "dark");
    } else {
      document.body.classList.remove("dark-mode");
      localStorage.setItem("theme", "light");
    }
  });

  window.addEventListener("DOMContentLoaded", () => {
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "dark") {
      document.body.classList.add("dark-mode");
      toggleSwitch.checked = true;
    }
  });
  </script>
</body>
</html>
